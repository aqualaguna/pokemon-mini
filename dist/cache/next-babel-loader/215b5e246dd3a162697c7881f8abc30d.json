{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport Head from 'next/head';\nimport styles from '../styles/Home.module.css';\nimport Navigation from '../components/Navigation';\nimport React, { useEffect, useState } from 'react';\nimport InfiniteScroll from 'react-infinite-scroll-component';\nimport toTitleCase from '../helper/TitleCase';\nimport ImageLoader from '../components/ImageLoader';\nimport PokemonSkeleton from '../components/PokemonSkeleton';\nimport { useRouter } from 'next/router';\nimport requestListPokemon from '../graphql/requestListPokemon';\nimport Loader from '../components/Loader';\nexport default function Home() {\n  var router = useRouter();\n\n  var _useState = useState([]),\n      listPokemon = _useState[0],\n      updateListPokemon = _useState[1];\n\n  var _useState2 = useState(30),\n      limit = _useState2[0],\n      updateLimit = _useState2[1];\n\n  var _useState3 = useState(0),\n      offset = _useState3[0],\n      updateOffset = _useState3[1];\n\n  function reqListPokemon() {\n    if (offset == -1) return listPokemon;\n    return requestListPokemon(limit, offset) // .then((data) => new Promise(resolve => setTimeout(() => resolve(data), 50000)))\n    .then(function (_ref) {\n      var data = _ref.data;\n      var pokemons = data.pokemons;\n      updateOffset(pokemons.nextOffset == 0 ? -1 : pokemons.nextOffset);\n      updateListPokemon(listPokemon.concat(pokemons.results));\n      return listPokemon;\n    });\n  }\n\n  useEffect(function () {\n    // Run! Like go get some data from an API.\n    reqListPokemon();\n  }, []);\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: styles.container,\n    children: [/*#__PURE__*/_jsxs(Head, {\n      children: [/*#__PURE__*/_jsx(\"title\", {\n        children: \"List Pokemon\"\n      }), /*#__PURE__*/_jsx(\"link\", {\n        rel: \"icon\",\n        href: \"/favicon.ico\"\n      })]\n    }), /*#__PURE__*/_jsx(Navigation, {\n      main: /*#__PURE__*/_jsx(\"div\", {\n        className: \"flex flex-column h-full\",\n        children: /*#__PURE__*/_jsx(\"main\", {\n          className: styles.main,\n          children: /*#__PURE__*/_jsx(\"div\", {\n            id: \"scrollableDiv\",\n            className: \"flex-1\",\n            style: {\n              overflow: 'auto',\n              display: 'flex'\n            },\n            children: /*#__PURE__*/_jsx(InfiniteScroll, {\n              className: \"flex flex-wrap w-full\",\n              dataLength: listPokemon.length,\n              next: reqListPokemon,\n              hasMore: offset != -1,\n              loader: /*#__PURE__*/_jsx(_Fragment, {\n                children: _toConsumableArray(Array(limit)).map(function (e, i) {\n                  return /*#__PURE__*/_jsx(PokemonSkeleton, {});\n                })\n              }),\n              scrollableTarget: \"scrollableDiv\",\n              endMessage: /*#__PURE__*/_jsx(\"p\", {\n                className: \"w-full text-2xl\",\n                style: {\n                  textAlign: 'center'\n                },\n                children: /*#__PURE__*/_jsx(\"b\", {\n                  children: \"There is no more Pokemon!\"\n                })\n              }),\n              children: listPokemon.map(function (pokemon, index) {\n                return /*#__PURE__*/_jsx(\"div\", {\n                  className: \"p-2 w-full sm:w-full md:w-1/3 lg:w-2/12 transform hover:-translate-y-1 hover:scale-110 transition duration-500 ease-in-out hover:ring-red\",\n                  children: /*#__PURE__*/_jsxs(\"article\", {\n                    className: \"w-full overflow-hidden rounded-lg shadow hover:shadow-lg hover:text-pokeball\",\n                    children: [/*#__PURE__*/_jsx(\"a\", {\n                      onClick: function onClick() {\n                        return router.push('/pokemon/detail/' + pokemon.name);\n                      },\n                      children: /*#__PURE__*/_jsx(ImageLoader, {\n                        style: {},\n                        className: \"w-full\",\n                        src: pokemon.image,\n                        loading: function loading() {\n                          return /*#__PURE__*/_jsx(Loader, {\n                            size: \"70px\"\n                          });\n                        },\n                        error: function error() {\n                          return /*#__PURE__*/_jsx(\"div\", {\n                            children: \"Error\"\n                          });\n                        }\n                      })\n                    }), /*#__PURE__*/_jsx(\"header\", {\n                      className: \"flex items-center justify-between leading-tight p-2 md:p-4\",\n                      children: /*#__PURE__*/_jsx(\"h1\", {\n                        className: \"text-2xl sm:text-lg hover:underline text-center w-full\",\n                        onClick: function onClick() {\n                          return router.push('/pokemon/detail/' + pokemon.name);\n                        },\n                        children: toTitleCase(pokemon.name)\n                      })\n                    })]\n                  })\n                }, index);\n              })\n            })\n          })\n        })\n      })\n    })]\n  });\n}","map":null,"metadata":{},"sourceType":"module"}