{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { useRouter } from \"next/router\";\nimport React, { useEffect, useState } from \"react\";\nimport Modal from \"./Modal\";\nimport { toast } from \"react-toastify\";\nimport { addOwnedPokemon } from \"../storage\";\nconst catchVariants = {\n  catch: {\n    scale: 2.5,\n    y: [0, 100, 80, 100],\n    x: [0, -10, 10, -10, 10, 0],\n    rotate: [0, -20, 20, -10, 10, 0],\n    transition: {\n      x: {\n        delay: 1,\n        repeat: Infinity\n      },\n      rotate: {\n        delay: 1,\n        repeat: Infinity\n      }\n    }\n  },\n  fail: {\n    y: 100,\n    scale: 0\n  },\n  success: {\n    scale: 2.5\n  }\n};\nconst littlecatchVariants = {\n  catch: {\n    opacity: 0,\n    scale: 2.5,\n    y: [20, 120, 100, 120],\n    x: [-23, -33, -13, -33, -13, -23],\n    rotate: [0, -20, 20, -10, 10, 0],\n    transition: {\n      x: {\n        delay: 1,\n        repeat: Infinity\n      },\n      rotate: {\n        delay: 1,\n        repeat: Infinity\n      }\n    }\n  },\n  fail: {\n    opacity: 0\n  },\n  success: {\n    opacity: 1,\n    scale: 500,\n    transition: {\n      opacity: {\n        duration: 0.1\n      },\n      scale: {\n        delay: 0.5\n      }\n    }\n  }\n};\nexport default function CatchPokeballModal({\n  show,\n  updateShow,\n  pokemon\n}) {\n  const router = useRouter();\n  const {\n    query: {\n      name\n    }\n  } = router;\n  const {\n    0: pokeballState,\n    1: updatePokeballState\n  } = useState(\"catch\");\n  const {\n    0: pokemonName,\n    1: updatePokemonName\n  } = useState(\"\");\n  const {\n    0: gatcha,\n    1: updateGatcha\n  } = useState(false);\n  useEffect(() => {\n    if (show) setTimeout(() => {\n      console.log('fail');\n\n      if (!gatcha) {\n        updateGatcha(true);\n\n        if (Math.random() > 0.5) {\n          updatePokeballState('fail');\n        } else {\n          updatePokeballState('success');\n        }\n      }\n    }, 2000);else {\n      // reset\n      updatePokeballState('catch');\n      updateGatcha(false);\n    }\n  }, [show]);\n\n  function submitName(species, pickedName, pokemon) {\n    let payload = {\n      species_name: typeof species == 'string' ? species : species[0] || '',\n      name: pickedName,\n      image: pokemon.sprites.front_default\n    };\n\n    try {\n      addOwnedPokemon(payload);\n    } catch (e) {\n      toast.error(e);\n      return;\n    }\n\n    updatePokemonName(\"\");\n    updateShow(false);\n  }\n\n  return /*#__PURE__*/_jsx(Modal, {\n    show: show,\n    updateShow: updateShow,\n    noAction: true,\n    children: /*#__PURE__*/_jsxs(\"div\", {\n      className: \"w-full h-60 bg-pokeball flex justify-center\",\n      children: [/*#__PURE__*/_jsx(motion.img, {\n        variants: catchVariants,\n        animate: pokeballState,\n        className: \"h-6 w-auto m-2\",\n        src: \"https://pokedex.stevenhansel.com/assets/images/pokeball.png\",\n        alt: \"Pokemon Mini\"\n      }), /*#__PURE__*/_jsx(motion.div, {\n        variants: littlecatchVariants,\n        animate: pokeballState,\n        className: \"w-1 h-1 bg-white rounded-full\"\n      }), /*#__PURE__*/_jsx(AnimatePresence, {\n        children: pokeballState == 'fail' && /*#__PURE__*/_jsx(motion.span, {\n          initial: {\n            scale: 0\n          },\n          animate: {\n            scale: 1.1,\n            marginTop: '30px'\n          },\n          transition: {\n            delay: 0.75\n          },\n          className: \"text-white text-xl\",\n          children: \"Pokemon Run Away!\"\n        })\n      }), /*#__PURE__*/_jsx(AnimatePresence, {\n        children: pokeballState == 'success' && /*#__PURE__*/_jsxs(motion.div, {\n          initial: {\n            opacity: 0\n          },\n          animate: {\n            opacity: 1\n          },\n          className: \"text-pokeball text-xl w-full z-10\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4\",\n            children: /*#__PURE__*/_jsx(\"div\", {\n              className: \"sm:flex sm:items-start\",\n              children: /*#__PURE__*/_jsxs(\"div\", {\n                className: \"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full\",\n                children: [/*#__PURE__*/_jsx(\"h3\", {\n                  className: \"text-lg leading-6 font-medium text-gray-900\",\n                  id: \"modal-headline\",\n                  children: \"Name Your Pokemon\"\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  className: \"mt-2\",\n                  children: /*#__PURE__*/_jsx(\"div\", {\n                    className: \"col-span-3 sm:col-span-2\",\n                    children: /*#__PURE__*/_jsx(\"div\", {\n                      className: \"mt-1 flex rounded-md shadow-sm w-full\",\n                      children: /*#__PURE__*/_jsx(\"input\", {\n                        value: pokemonName,\n                        onChange: e => updatePokemonName(e.target.value),\n                        type: \"text\",\n                        placeholder: \"pikachu.. or something\",\n                        className: \"p-3 h-10 flex-1 block w-full rounded-none rounded-r-md sm:text-sm border-gray-300 text-black\"\n                      })\n                    })\n                  })\n                })]\n              })\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse\",\n            children: /*#__PURE__*/_jsx(\"button\", {\n              type: \"button\",\n              onClick: () => submitName(name, pokemonName, pokemon),\n              className: \"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm\",\n              children: \"Submit\"\n            })\n          })]\n        })\n      })]\n    })\n  });\n}","map":null,"metadata":{},"sourceType":"module"}